  <div class="container">
    <div class="row middle-xs no-padding">
      <div class="col-xs-12 col-sm-8 col-md-6 col-lg-4 center-xs no-padding">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <div class="card borde-radio-10">
        <%= form_with(model: enroll, local: true,autocomplete: "off") do |form| %>
          <% if enroll.errors.any? %>
            <div id="error_explanation">
              <h2><%= pluralize(enroll.errors.count, "error") %> prohibited this enroll from being saved:</h2>

              <ul>
              <% enroll.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
              </ul>
            </div>
          <% end %>
          <div class="card-content ">
            <span class="card-title">Matricula</span>
          <div class="row around-xs">
            <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
              <div class="box">
                <div class="input-field col s12" >
                
                  <%= collection_select(:discipleship,:id,Discipleship.all, :id, :nombre,options = {prompt: "Seleccione"} ,html_options ={onChange: "update_versions_div(this.options[this.selectedIndex].value,'discipleship');"}) %>
                  <label>Discipulado</label>
                </div>   
              </div>
            </div>
            <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
              <div class="box">
                <div class="input-field col s12" id="comboGrupo">
                
                  <%= form.select :group_id, [['Seleccione','']]%>
                  <label>Grupo</label>
                </div>   
              </div>
            </div>
            
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
              <div class="box">
                <div class="input-field col s12">
                  <%= form.label :cedulaEstudiante, "Cedula del estudiante"%>
                  <%= form.text_field :cedulaEstudiante, class: "autocomplete", id: "enroll_cedulaEstudiante", autocomplete: "off" %>

                </div>
              </div>
            </div>
          </div>

          

          </div>
          <div class="card-action">
            
            <%= form.submit "Registrar",class: "btn  waves-light  borde-radio-5" %>
          </div> 
        <% end %>
      </div>
    </div>
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" >
      <div class="box">
        <div class="card z-depth-3 borde-radio-10">
          <div class="card-content black-text start-xs" >
            <span class="card-title center" >Datos del estudiante</span>
            <div id="estudiante"></div>
          </div>
        </div>
      </div>
    </div>
    </div>
      
    <div class="col-xs-12
                col-sm-8
                col-md-6
                col-lg-6 " >
      <div class="box">
        <div class="card z-depth-3 borde-radio-10">
          <div class="card-content black-text start-xs" >
            <span class="card-title center" >Horario del grupo</span>
            <div id="horario"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row center-xs" >
    
  </div>

</div>




      
      
  
<script type="text/javascript">
  $("#grupo")
  function update_versions_div(discipleship_i,combo) { 

          jQuery.ajax({
            url: "/cargar_grupos",
            type: "GET",
            data: {discipleship_id: discipleship_i,combo: combo},
            dataType: "html",
            success: (datos)=> {
              //--------------------------------------------------------
              if (combo=='grupo') {
                console.log('esto tiene datos', datos)
              jQuery("#horario").html(datos);

              }
              if(combo=='discipleship'){

                jQuery("#comboGrupo").html(datos);
                jQuery("#horario").html(null);

              }
              if(combo=='estudiante'){
                jQuery("#estudiante").html(datos);
                

              }
              
            }
          });
           $('select').formSelect();
           
          console.log('entre a la funcion con ajax');
        }
        $('select').formSelect();
       
    document.addEventListener('turbolinks:load', function() {
         var arra={};
          

          <%User.all.each do |user|%>
          arra[<%= "#{user.identificacion}"%>]= null;
          <%end%>
          console.log('estos son los estudiantes ', arra)
            $('input.autocomplete').autocomplete({
              data: arra,
              onAutocomplete: function(){
                console.log('seleccione algo ', this, ' datos ', $("#enroll_cedulaEstudiante").val());
                update_versions_div($("#enroll_cedulaEstudiante").val(),'estudiante')
              }

            });
    });
  //       $(document).ready(function(){
  //          var arra={};
          

  //         <%User.all.each do |user|%>
  //         arra[<%= "#{user.identificacion}"%>]= null;
  //         <%end%>
  //   $('input.autocomplete').autocomplete({
  //     data: arra,
  //     onAutocomplete: function(){
  //       console.log('seleccione algo ', this, ' datos ', $("#cedulaEstudiante").val());
  //       update_versions_div($("#cedulaEstudiante").val(),'estudiante')
  //     }

  //   });

  // });
     
</script>